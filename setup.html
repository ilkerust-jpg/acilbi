<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Acilbi ‚Äì Sahip Giri≈üi</title>
<style>
body{font-family:system-ui;background:#f3f3f3;color:#111;padding:18px}
input,select,button{width:100%;padding:12px;margin-top:10px;font-size:16px;border-radius:8px;border:1px solid #ccc}
button{background:#111;color:#fff;border:none}
.panel{background:#fff;padding:16px;border-radius:12px}
label{font-weight:600;margin-top:12px;display:block}
.small{font-size:14px;color:#555}
</style>
</head>
<body>

<h2>üîê Bileklik Sahibi Bilgi Giri≈üi</h2>

<div class="panel">
  <label>Bileklik ID</label>
  <input id="idInput" placeholder="√ñrn: AB12CD">

  <label>Sahip ≈ûifresi</label>
  <input id="passInput" type="password" placeholder="Kutudan √ßƒ±kan ≈üifre">

  <hr>

  <label>Ad Soyad</label>
  <input id="nameInput">

  <label>Doƒüum Yƒ±lƒ±</label>
  <select id="yearInput"></select>
  <div class="small" id="ageText"></div>

  <label>Kan Grubu</label>
  <select id="bloodInput">
    <option value="">Se√ßiniz</option>
    <option>A Rh+</option><option>A Rh-</option>
    <option>B Rh+</option><option>B Rh-</option>
    <option>AB Rh+</option><option>AB Rh-</option>
    <option>0 Rh+</option><option>0 Rh-</option>
  </select>

  <label>Kronik Rahatsƒ±zlƒ±klar</label>
  <input id="illnessInput">

  <label>Rutin ƒ∞la√ßlar</label>
  <input id="medsInput">

  <label>Alerjiler</label>
  <input id="allergyInput">

  <label>Acil Ki≈üi Telefon</label>
  <input id="emergencyInput">

  <button onclick="saveData()">Bilgileri Kaydet</button>
  <div id="status" class="small"></div>
</div>

<script>
// Doƒüum yƒ±lƒ± dropdown
const yearSelect = document.getElementById("yearInput")
const now = new Date().getFullYear()
for(let y = now; y >= 1930; y--){
  const opt = document.createElement("option")
  opt.value = y
  opt.textContent = y
  yearSelect.appendChild(opt)
}

yearSelect.onchange = () => {
  const age = now - yearSelect.value
  document.getElementById("ageText").textContent = "Ya≈ü: " + age
}

async function saveData(){
  const data = {
    id: document.getElementById("idInput").value.trim().toUpperCase(),
    ownerPass: document.getElementById("passInput").value.trim(),
    name: document.getElementById("nameInput").value,
    birthYear: document.getElementById("yearInput").value,
    blood: document.getElementById("bloodInput").value,
    illness: document.getElementById("illnessInput").value,
    meds: document.getElementById("medsInput").value,
    allergy: document.getElementById("allergyInput").value,
    emergency: document.getElementById("emergencyInput").value
  }

  document.getElementById("status").textContent = "Kaydediliyor..."

  const res = await fetch("https://acilbi.com/save", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(data)
  })

  const text = await res.text()
  document.getElementById("status").textContent = text
}
</script>

</body>
</html>
